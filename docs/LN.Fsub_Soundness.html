<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">LN.Fsub_Soundness</h1>

<div class="code">
</div>

<div class="doc">
Type-safety proofs for Fsub.

<div class="paragraph"> </div>

    Authors: Brian Aydemir and Arthur Chargu\'eraud, with help from
    Aaron Bohannon, Jeffrey Vaughan, and Dimitrios Vytiniotis.

<div class="paragraph"> </div>

    In parentheses are given the label of the corresponding lemma in
    the appendix (informal proofs) of the POPLmark Challenge.

<div class="paragraph"> </div>

    Table of contents:
<ul class="doclist">
<li> <a href="#subtyping">Properties of subtyping</a>

</li>
<li> <a href="#typing">Properties of typing</a>

</li>
<li> <a href="#preservation">Preservation</a>

</li>
<li> <a href="#progress">Progress</a> 
</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="LN.Fsub_Lemmas.html#"><span class="id" title="library">Fsub_Lemmas</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;**********************************************************************&nbsp;*)</span><br/>
</div>

<div class="doc">
<a name="lab145"></a><h1 class="section"><a name="subtyping"></a> Properties of subtyping</h1>

</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;**********************************************************************&nbsp;*)</span><br/>
</div>

<div class="doc">
<a name="lab146"></a><h2 class="section">Reflexivity (1)</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="sub_reflexivity"><span class="id" title="lemma">sub_reflexivity</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">E</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#wf_typ"><span class="id" title="inductive">wf_typ</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">T</span> <span class="id" title="var">Ok</span> <span class="id" title="var">Wf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Wf</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">Y</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#sub_all"><span class="id" title="constructor">sub_all</span></a>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;**********************************************************************&nbsp;*)</span><br/>
</div>

<div class="doc">
<a name="lab147"></a><h2 class="section">Weakening (2)</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="sub_weakening"><span class="id" title="lemma">sub_weakening</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> (<a class="idref" href="LN.Fsub_Soundness.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#wf_env"><span class="id" title="inductive">wf_env</span></a> (<a class="idref" href="LN.Fsub_Soundness.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> (<a class="idref" href="LN.Fsub_Soundness.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="var">simpl_env</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="LN.Fsub_Lemmas.html#wf_typ_weakening"><span class="id" title="lemma">wf_typ_weakening</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span> <span class="id" title="var">Sub</span> <span class="id" title="var">Ok</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">G</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">G</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Sub</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">G</span> <span class="id" title="var">Ok</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">subst</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "sub_trans_tvar".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="LN.Fsub_Definitions.html#sub_trans_tvar"><span class="id" title="constructor">sub_trans_tvar</span></a> <span class="id" title="var">U</span>)...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "sub_all".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">Y</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#sub_all"><span class="id" title="constructor">sub_all</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Metalib.Metatheory.html#EnvImpl.app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;**********************************************************************&nbsp;*)</span><br/>
</div>

<div class="doc">
<a name="lab148"></a><h2 class="section">Narrowing and transitivity (3)</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="transitivity_on"><span class="id" title="definition">transitivity_on</span></a> <span class="id" title="var">Q</span> := <span class="id" title="keyword">forall</span> <span class="id" title="var">E</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="sub_narrowing_aux"><span class="id" title="lemma">sub_narrowing_aux</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Q</span> <span class="id" title="var">F</span> <span class="id" title="var">E</span> <span class="id" title="var">Z</span> <span class="id" title="var">P</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Soundness.html#transitivity_on"><span class="id" title="definition">transitivity_on</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> (<a class="idref" href="LN.Fsub_Soundness.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Z"><span class="id" title="variable">Z</span></a> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_sub"><span class="id" title="constructor">bind_sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> (<a class="idref" href="LN.Fsub_Soundness.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Z"><span class="id" title="variable">Z</span></a> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_sub"><span class="id" title="constructor">bind_sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="var">simpl_env</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="LN.Fsub_Lemmas.html#wf_typ_narrowing"><span class="id" title="lemma">wf_typ_narrowing</span></a>, <a class="idref" href="LN.Fsub_Lemmas.html#wf_env_narrowing"><span class="id" title="lemma">wf_env_narrowing</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Q</span> <span class="id" title="var">F</span> <span class="id" title="var">E</span> <span class="id" title="var">Z</span> <span class="id" title="var">P</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span> <span class="id" title="var">TransQ</span> <span class="id" title="var">SsubT</span> <span class="id" title="var">PsubQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">F</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">Z</span> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_sub"><span class="id" title="constructor">bind_sub</span></a> <span class="id" title="var">Q</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">G</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">F</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">SsubT</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">F</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">subst</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "sub_trans_tvar".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">X</span> <a class="idref" href="Metalib.CoqEqDec.html#a6e843c62e1ac2a74737b7a9f636e026"><span class="id" title="notation">==</span></a> <span class="id" title="var">Z</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "X = Z".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="LN.Fsub_Definitions.html#sub_trans_tvar"><span class="id" title="constructor">sub_trans_tvar</span></a> <span class="id" title="var">P</span>); [ <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Metalib.Metatheory.html#EnvImpl.fresh_mid_head"><span class="id" title="lemma">fresh_mid_head</span></a> | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">TransQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SSCase</span> "P &lt;: Q".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rewrite_env</span> (<a class="idref" href="LN.Fsub_Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><span class="id" title="var">F</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">Z</span> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_sub"><span class="id" title="constructor">bind_sub</span></a> <span class="id" title="var">P</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Soundness.html#sub_weakening"><span class="id" title="lemma">sub_weakening</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SSCase</span> "Q &lt;: T".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">analyze_binds_uniq</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">BindsTacVal</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "X &lt;&gt; Z".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="LN.Fsub_Definitions.html#sub_trans_tvar"><span class="id" title="constructor">sub_trans_tvar</span></a> <span class="id" title="var">U</span>)...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "sub_all".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">Y</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#sub_all"><span class="id" title="constructor">sub_all</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Metalib.Metatheory.html#EnvImpl.app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="sub_transitivity"><span class="id" title="lemma">sub_transitivity</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Q</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Soundness.html#transitivity_on"><span class="id" title="definition">transitivity_on</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Q"><span class="id" title="variable">Q</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="var">simpl_env</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="LN.Fsub_Soundness.html#transitivity_on"><span class="id" title="definition">transitivity_on</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Q</span> <span class="id" title="var">E</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span> <span class="id" title="var">SsubQ</span> <span class="id" title="var">QsubT</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">W</span> : <a class="idref" href="LN.Fsub_Definitions.html#type"><span class="id" title="inductive">type</span></a> <span class="id" title="var">Q</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">T</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">S</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> <span class="id" title="var">Q</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Q'</span> <span class="id" title="tactic">in</span> |- *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">Q'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">W</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Q'</span> <span class="id" title="var">EQ</span> <span class="id" title="var">E</span> <span class="id" title="var">S</span> <span class="id" title="var">SsubQ</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">SsubQ</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">T'</span> <span class="id" title="var">QsubT</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">QsubT</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span> 4 <span class="id" title="keyword">using</span> <a class="idref" href="LN.Fsub_Definitions.html#sub_trans_tvar"><span class="id" title="constructor">sub_trans_tvar</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "sub_all / sub_top".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> <span class="id" title="var">E</span> (<a class="idref" href="LN.Fsub_Definitions.html#typ_all"><span class="id" title="constructor">typ_all</span></a> <span class="id" title="var">S1</span> <span class="id" title="var">S2</span>) (<a class="idref" href="LN.Fsub_Definitions.html#typ_all"><span class="id" title="constructor">typ_all</span></a> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "proof of assertion".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">y</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#sub_all"><span class="id" title="constructor">sub_all</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "sub_all / sub_all".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">Y</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#sub_all"><span class="id" title="constructor">sub_all</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "bounds".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "bodies".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lapply</span> (<span class="id" title="var">H0</span> <span class="id" title="var">Y</span>); [ <span class="id" title="tactic">intros</span> <span class="id" title="var">K</span> | <span class="id" title="tactic">auto</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">K</span> (<a class="idref" href="LN.Fsub_Definitions.html#open_tt"><span class="id" title="definition">open_tt</span></a> <span class="id" title="var">T2</span> <span class="id" title="var">Y</span>))...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rewrite_env</span> (<a class="idref" href="LN.Fsub_Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">Y</span> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_sub"><span class="id" title="constructor">bind_sub</span></a> <span class="id" title="var">T0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="LN.Fsub_Soundness.html#sub_narrowing_aux"><span class="id" title="lemma">sub_narrowing_aux</span></a> <span class="id" title="var">T1</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="LN.Fsub_Soundness.html#transitivity_on"><span class="id" title="definition">transitivity_on</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> (<span class="id" title="var">IHW</span> <span class="id" title="var">T1</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="sub_narrowing"><span class="id" title="lemma">sub_narrowing</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Q</span> <span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">Z</span> <span class="id" title="var">P</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> (<a class="idref" href="LN.Fsub_Soundness.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Z"><span class="id" title="variable">Z</span></a> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_sub"><span class="id" title="constructor">bind_sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> (<a class="idref" href="LN.Fsub_Soundness.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Z"><span class="id" title="variable">Z</span></a> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_sub"><span class="id" title="constructor">bind_sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="LN.Fsub_Soundness.html#sub_narrowing_aux"><span class="id" title="lemma">sub_narrowing_aux</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Soundness.html#sub_transitivity"><span class="id" title="lemma">sub_transitivity</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;**********************************************************************&nbsp;*)</span><br/>
</div>

<div class="doc">
<a name="lab149"></a><h2 class="section">Type substitution preserves subtyping (10)</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="sub_through_subst_tt"><span class="id" title="lemma">sub_through_subst_tt</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Q</span> <span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">Z</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span> <span class="id" title="var">P</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> (<a class="idref" href="LN.Fsub_Soundness.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Z"><span class="id" title="variable">Z</span></a> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_sub"><span class="id" title="constructor">bind_sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> (<a class="idref" href="Metalib.Metatheory.html#EnvImpl.map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_tb"><span class="id" title="definition">subst_tb</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Z"><span class="id" title="variable">Z</span></a> <a class="idref" href="LN.Fsub_Soundness.html#P"><span class="id" title="variable">P</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_tt"><span class="id" title="definition">subst_tt</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Z"><span class="id" title="variable">Z</span></a> <a class="idref" href="LN.Fsub_Soundness.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="LN.Fsub_Soundness.html#S"><span class="id" title="variable">S</span></a>) (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_tt"><span class="id" title="definition">subst_tt</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Z"><span class="id" title="variable">Z</span></a> <a class="idref" href="LN.Fsub_Soundness.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a>).<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_env</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> 4 <span class="id" title="keyword">using</span> <a class="idref" href="LN.Fsub_Lemmas.html#wf_typ_subst_tb"><span class="id" title="lemma">wf_typ_subst_tb</span></a>, <a class="idref" href="LN.Fsub_Lemmas.html#wf_env_subst_tb"><span class="id" title="lemma">wf_env_subst_tb</span></a>, <a class="idref" href="LN.Fsub_Lemmas.html#wf_typ_weaken_head"><span class="id" title="lemma">wf_typ_weaken_head</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Q</span> <span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">Z</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span> <span class="id" title="var">P</span> <span class="id" title="var">SsubT</span> <span class="id" title="var">PsubQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">F</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">Z</span> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_sub"><span class="id" title="constructor">bind_sub</span></a> <span class="id" title="var">Q</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">G</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">F</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">SsubT</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">G</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="var">subst_tt</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "sub_top".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#sub_top"><span class="id" title="constructor">sub_top</span></a>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "sub_refl_tvar".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">X</span> <a class="idref" href="Metalib.CoqEqDec.html#a6e843c62e1ac2a74737b7a9f636e026"><span class="id" title="notation">==</span></a> <span class="id" title="var">Z</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "X = Z".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Soundness.html#sub_reflexivity"><span class="id" title="lemma">sub_reflexivity</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "X &lt;&gt; Z".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Soundness.html#sub_reflexivity"><span class="id" title="lemma">sub_reflexivity</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">analyze_binds</span> <span class="id" title="var">H3</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="LN.Fsub_Definitions.html#wf_typ_var"><span class="id" title="constructor">wf_typ_var</span></a> (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_tt"><span class="id" title="definition">subst_tt</span></a> <span class="id" title="var">Z</span> <span class="id" title="var">P</span> <span class="id" title="var">U</span>))...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "sub_trans_tvar".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">X</span> <a class="idref" href="Metalib.CoqEqDec.html#a6e843c62e1ac2a74737b7a9f636e026"><span class="id" title="notation">==</span></a> <span class="id" title="var">Z</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "X = Z".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="LN.Fsub_Soundness.html#sub_transitivity"><span class="id" title="lemma">sub_transitivity</span></a> <span class="id" title="var">Q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SSCase</span> "left branch".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rewrite_env</span> (<a class="idref" href="LN.Fsub_Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Metalib.Metatheory.html#EnvImpl.map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_tb"><span class="id" title="definition">subst_tb</span></a> <span class="id" title="var">Z</span> <span class="id" title="var">P</span>) <span class="id" title="var">G</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Soundness.html#sub_weakening"><span class="id" title="lemma">sub_weakening</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SSCase</span> "right branch".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_tt_fresh"><span class="id" title="lemma">subst_tt_fresh</span></a> <span class="id" title="var">Z</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">analyze_binds_uniq</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">BindsTacVal</span>; <span class="id" title="tactic">subst</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="LN.Fsub_Lemmas.html#notin_fv_wf"><span class="id" title="lemma">notin_fv_wf</span></a> <span class="id" title="var">E</span>); <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Metalib.Metatheory.html#EnvImpl.fresh_mid_tail"><span class="id" title="lemma">fresh_mid_tail</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "X &lt;&gt; Z".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="LN.Fsub_Definitions.html#sub_trans_tvar"><span class="id" title="constructor">sub_trans_tvar</span></a> (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_tt"><span class="id" title="definition">subst_tt</span></a> <span class="id" title="var">Z</span> <span class="id" title="var">P</span> <span class="id" title="var">U</span>))...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="LN.Fsub_Lemmas.html#map_subst_tb_id"><span class="id" title="lemma">map_subst_tb_id</span></a> <span class="id" title="var">E</span> <span class="id" title="var">Z</span> <span class="id" title="var">P</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ | <span class="id" title="tactic">auto</span> | <span class="id" title="tactic">eapply</span> <a class="idref" href="Metalib.Metatheory.html#EnvImpl.fresh_mid_tail"><span class="id" title="lemma">fresh_mid_tail</span></a>; <span class="id" title="tactic">eauto</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">analyze_binds</span> <span class="id" title="var">H</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "sub_all".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">X</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#sub_all"><span class="id" title="constructor">sub_all</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="LN.Fsub_Infrastructure.html#subst_tt_open_tt_var"><span class="id" title="lemma">subst_tt_open_tt_var</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="LN.Fsub_Infrastructure.html#subst_tt_open_tt_var"><span class="id" title="lemma">subst_tt_open_tt_var</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rewrite_env</span> (<a class="idref" href="Metalib.Metatheory.html#EnvImpl.map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_tb"><span class="id" title="definition">subst_tb</span></a> <span class="id" title="var">Z</span> <span class="id" title="var">P</span>) (<span class="id" title="var">X</span> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_sub"><span class="id" title="constructor">bind_sub</span></a> <span class="id" title="var">T1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">G</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;**********************************************************************&nbsp;*)</span><br/>
</div>

<div class="doc">
<a name="lab150"></a><h1 class="section"><a name="typing"></a> Properties of typing</h1>

</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;**********************************************************************&nbsp;*)</span><br/>
</div>

<div class="doc">
<a name="lab151"></a><h2 class="section">Weakening (5)</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="typing_weakening"><span class="id" title="lemma">typing_weakening</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">G</span> <span class="id" title="var">e</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> (<a class="idref" href="LN.Fsub_Soundness.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#wf_env"><span class="id" title="inductive">wf_env</span></a> (<a class="idref" href="LN.Fsub_Soundness.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> (<a class="idref" href="LN.Fsub_Soundness.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="var">simpl_env</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="LN.Fsub_Lemmas.html#wf_typ_weakening"><span class="id" title="lemma">wf_typ_weakening</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Lemmas.html#wf_typ_from_wf_env_typ"><span class="id" title="lemma">wf_typ_from_wf_env_typ</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Lemmas.html#wf_typ_from_wf_env_sub"><span class="id" title="lemma">wf_typ_from_wf_env_sub</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Soundness.html#sub_weakening"><span class="id" title="lemma">sub_weakening</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">G</span> <span class="id" title="var">e</span> <span class="id" title="var">T</span> <span class="id" title="var">Typ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">G</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">G</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Typ</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">G</span> <span class="id" title="var">EQ</span> <span class="id" title="var">Ok</span>; <span class="id" title="tactic">subst</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_abs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">x</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#typing_abs"><span class="id" title="constructor">typing_abs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lapply</span> (<span class="id" title="var">H</span> <span class="id" title="var">x</span>); [<span class="id" title="tactic">intros</span> <span class="id" title="var">K</span> | <span class="id" title="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Metalib.Metatheory.html#EnvImpl.app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">H0</span> <span class="id" title="var">x</span>)...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_tabs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">X</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#typing_tabs"><span class="id" title="constructor">typing_tabs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lapply</span> (<span class="id" title="var">H</span> <span class="id" title="var">X</span>); [<span class="id" title="tactic">intros</span> <span class="id" title="var">K</span> | <span class="id" title="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Metalib.Metatheory.html#EnvImpl.app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">H0</span> <span class="id" title="var">X</span>)...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_let".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">x</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#typing_let"><span class="id" title="constructor">typing_let</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lapply</span> (<span class="id" title="var">H0</span> <span class="id" title="var">x</span>); [<span class="id" title="tactic">intros</span> <span class="id" title="var">K</span> | <span class="id" title="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Metalib.Metatheory.html#EnvImpl.app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_case".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">x</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#typing_case"><span class="id" title="constructor">typing_case</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "inl branch".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lapply</span> (<span class="id" title="var">H0</span> <span class="id" title="var">x</span>); [<span class="id" title="tactic">intros</span> <span class="id" title="var">K</span> | <span class="id" title="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Metalib.Metatheory.html#EnvImpl.app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">J</span> : <a class="idref" href="LN.Fsub_Definitions.html#wf_typ"><span class="id" title="inductive">wf_typ</span></a> (<span class="id" title="var">G</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">F</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>) (<a class="idref" href="LN.Fsub_Definitions.html#typ_sum"><span class="id" title="constructor">typ_sum</span></a> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span>))...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">J</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "inr branch".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lapply</span> (<span class="id" title="var">H2</span> <span class="id" title="var">x</span>); [<span class="id" title="tactic">intros</span> <span class="id" title="var">K</span> | <span class="id" title="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Metalib.Metatheory.html#EnvImpl.app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">J</span> : <a class="idref" href="LN.Fsub_Definitions.html#wf_typ"><span class="id" title="inductive">wf_typ</span></a> (<span class="id" title="var">G</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">F</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>) (<a class="idref" href="LN.Fsub_Definitions.html#typ_sum"><span class="id" title="constructor">typ_sum</span></a> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span>))...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">J</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;**********************************************************************&nbsp;*)</span><br/>
</div>

<div class="doc">
<a name="lab152"></a><h2 class="section">Strengthening (6)</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="sub_strengthening"><span class="id" title="lemma">sub_strengthening</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">U</span> <span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> (<a class="idref" href="LN.Fsub_Soundness.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_typ"><span class="id" title="constructor">bind_typ</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> (<a class="idref" href="LN.Fsub_Soundness.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="LN.Fsub_Lemmas.html#wf_typ_strengthening"><span class="id" title="lemma">wf_typ_strengthening</span></a>, <a class="idref" href="LN.Fsub_Lemmas.html#wf_env_strengthening"><span class="id" title="lemma">wf_env_strengthening</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">U</span> <span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span> <span class="id" title="var">SsubT</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">F</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">x</span> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_typ"><span class="id" title="constructor">bind_typ</span></a> <span class="id" title="var">U</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">F</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">SsubT</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">F</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">subst</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "sub_trans_tvar".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="LN.Fsub_Definitions.html#sub_trans_tvar"><span class="id" title="constructor">sub_trans_tvar</span></a> <span class="id" title="var">U0</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">analyze_binds</span> <span class="id" title="var">H</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "sub_all".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">X</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#sub_all"><span class="id" title="constructor">sub_all</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Metalib.Metatheory.html#EnvImpl.app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(************************************************************************&nbsp;*)</span><br/>
</div>

<div class="doc">
<a name="lab153"></a><h2 class="section">Narrowing for typing (7)</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="typing_narrowing"><span class="id" title="lemma">typing_narrowing</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Q</span> <span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">P</span> <span class="id" title="var">e</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> (<a class="idref" href="LN.Fsub_Soundness.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_sub"><span class="id" title="constructor">bind_sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> (<a class="idref" href="LN.Fsub_Soundness.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_sub"><span class="id" title="constructor">bind_sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span> 6 <span class="id" title="keyword">using</span> <a class="idref" href="LN.Fsub_Lemmas.html#wf_env_narrowing"><span class="id" title="lemma">wf_env_narrowing</span></a>, <a class="idref" href="LN.Fsub_Lemmas.html#wf_typ_narrowing"><span class="id" title="lemma">wf_typ_narrowing</span></a>, <a class="idref" href="LN.Fsub_Soundness.html#sub_narrowing"><span class="id" title="lemma">sub_narrowing</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Q</span> <span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">X</span> <span class="id" title="var">P</span> <span class="id" title="var">e</span> <span class="id" title="var">T</span> <span class="id" title="var">PsubQ</span> <span class="id" title="var">Typ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">F</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">X</span> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_sub"><span class="id" title="constructor">bind_sub</span></a> <span class="id" title="var">Q</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">F</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Typ</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">F</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">subst</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_var".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">analyze_binds</span> <span class="id" title="var">H0</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_abs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">y</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#typing_abs"><span class="id" title="constructor">typing_abs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Metalib.Metatheory.html#EnvImpl.app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_tabs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">Y</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#typing_tabs"><span class="id" title="constructor">typing_tabs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Metalib.Metatheory.html#EnvImpl.app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_let".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">y</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#typing_let"><span class="id" title="constructor">typing_let</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Metalib.Metatheory.html#EnvImpl.app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_case".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">y</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#typing_case"><span class="id" title="constructor">typing_case</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "inl branch".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Metalib.Metatheory.html#EnvImpl.app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "inr branch".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Metalib.Metatheory.html#EnvImpl.app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(************************************************************************&nbsp;*)</span><br/>
</div>

<div class="doc">
<a name="lab154"></a><h2 class="section">Substitution preserves typing (8)</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="typing_through_subst_ee"><span class="id" title="lemma">typing_through_subst_ee</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">U</span> <span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span> <span class="id" title="var">e</span> <span class="id" title="var">u</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> (<a class="idref" href="LN.Fsub_Soundness.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_typ"><span class="id" title="constructor">bind_typ</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#u"><span class="id" title="variable">u</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> (<a class="idref" href="LN.Fsub_Soundness.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_ee"><span class="id" title="definition">subst_ee</span></a> <a class="idref" href="LN.Fsub_Soundness.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="LN.Fsub_Soundness.html#u"><span class="id" title="variable">u</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a>.<br/>

<br/>
</div>

<div class="doc">
We provide detailed comments for the following proof, mainly to
    point out several useful tactics and proof techniques.

<div class="paragraph"> </div>

    Starting a proof with "Proof with &lt;some tactic&gt;" allows us to
    specify a default tactic that should be used to solve goals.  To
    invoke this default tactic at the end of a proof step, we signal
    the end of the step with three periods instead of a single one,
    e.g., "apply typing_weakening...". 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="var">simpl_env</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> 4 <span class="id" title="keyword">using</span> <a class="idref" href="LN.Fsub_Lemmas.html#wf_typ_strengthening"><span class="id" title="lemma">wf_typ_strengthening</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Lemmas.html#wf_env_strengthening"><span class="id" title="lemma">wf_env_strengthening</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Soundness.html#sub_strengthening"><span class="id" title="lemma">sub_strengthening</span></a>.<br/>

<br/>
</div>

<div class="doc">
The proof proceeds by induction on the given typing derivation
      for e.  We use the <span class="inlinecode"><span class="id" title="var">remember</span></span> tactic, along with <span class="inlinecode"><span class="id" title="tactic">generalize</span></span>
      <span class="inlinecode"><span class="id" title="tactic">dependent</span></span>, to ensure that the goal is properly strengthened
      before we use induction. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">U</span> <span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span> <span class="id" title="var">e</span> <span class="id" title="var">u</span> <span class="id" title="var">TypT</span> <span class="id" title="var">TypU</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">F</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">x</span> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_typ"><span class="id" title="constructor">bind_typ</span></a> <span class="id" title="var">U</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">F</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">TypT</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">F</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="var">subst_ee</span>...<br/>

<br/>
</div>

<div class="doc">
The <span class="inlinecode"><a class="idref" href="LNgen.Fsub_ott.html#typing_var"><span class="id" title="constructor">typing_var</span></a></span> case involves a case analysis on whether the
      variable is the same as the one being substituted for. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_var".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">x0</span> <a class="idref" href="Metalib.CoqEqDec.html#a6e843c62e1ac2a74737b7a9f636e026"><span class="id" title="notation">==</span></a> <span class="id" title="var">x</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">subst</span> <span class="id" title="var">x0</span>.<br/>

<br/>
</div>

<div class="doc">
In the case where <span class="inlinecode"><span class="id" title="var">x0</span>=<a class="idref" href="Metalib.MSetWeakNotin.html#Notin_fun.Lemmas.x"><span class="id" title="variable">x</span></a></span>, we first observe that hypothesis
        <span class="inlinecode"><span class="id" title="var">H0</span></span> implies that <span class="inlinecode"><a class="idref" href="LN.Fsub_Definitions.html#T"><span class="id" title="variable">T</span></a>=<a class="idref" href="LN.Fsub_Definitions.html#U"><span class="id" title="variable">U</span></a></span>, since <span class="inlinecode"><a class="idref" href="Metalib.MSetWeakNotin.html#Notin_fun.Lemmas.x"><span class="id" title="variable">x</span></a></span> can only be bound once in
        the environment.  The conclusion then follows from hypothesis
        <span class="inlinecode"><span class="id" title="var">TypU</span></span> and weakening.  We can use the <span class="inlinecode"><span class="id" title="var">analyze_binds_uniq</span></span>
        tactic, described in the MetatheoryEnv library, with <span class="inlinecode"><span class="id" title="var">H0</span></span> to
        obtain the fact that <span class="inlinecode"><a class="idref" href="LN.Fsub_Definitions.html#T"><span class="id" title="variable">T</span></a>=<a class="idref" href="LN.Fsub_Definitions.html#U"><span class="id" title="variable">U</span></a></span>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "x0 = x".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">analyze_binds_uniq</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">BindsTacVal</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>.<br/>

<br/>
</div>

<div class="doc">
In order to apply <span class="inlinecode"><a class="idref" href="LNgen.Fsub_proofs.html#typing_weakening"><span class="id" title="lemma">typing_weakening</span></a></span>, we need to rewrite
            the environment so that it has the right shape.  (We could
            also prove a corollary of typing_weakening.)  The
            <span class="inlinecode"><span class="id" title="var">rewrite_env</span></span> tactic, described in the Environment
            library, is one way to perform this rewriting. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rewrite_env</span> (<a class="idref" href="LN.Fsub_Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">F</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Soundness.html#typing_weakening"><span class="id" title="lemma">typing_weakening</span></a>...<br/>

<br/>
</div>

<div class="doc">
In the case where <span class="inlinecode"><span class="id" title="var">x0</span>&lt;&gt;<a class="idref" href="Metalib.MSetWeakNotin.html#Notin_fun.Lemmas.x"><span class="id" title="variable">x</span></a></span>, the result follows by an exhaustive
        case analysis on exactly where <span class="inlinecode"><span class="id" title="var">x0</span></span> is bound in the
        environment.  We perform this case analysis by using the
        <span class="inlinecode"><span class="id" title="var">analyze_binds</span></span> tactic, described in the MetatheoryEnv
        library. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "x0 &lt;&gt; x".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">analyze_binds</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="LN.Fsub_Lemmas.html#wf_env_strengthening"><span class="id" title="lemma">wf_env_strengthening</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="LN.Fsub_Lemmas.html#wf_env_strengthening"><span class="id" title="lemma">wf_env_strengthening</span></a>.<br/>

<br/>
</div>

<div class="doc">
Informally, the <span class="inlinecode"><a class="idref" href="LNgen.Fsub_ott.html#typing_abs"><span class="id" title="constructor">typing_abs</span></a></span> case is a straightforward
      application of the induction hypothesis, which is called <span class="inlinecode"><span class="id" title="var">H0</span></span>
      here. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_abs".<br/>

<br/>
</div>

<div class="doc">
We use the "pick fresh and apply" tactic to apply the rule
        <span class="inlinecode"><a class="idref" href="LNgen.Fsub_ott.html#typing_abs"><span class="id" title="constructor">typing_abs</span></a></span> without having to calculate the appropriate
        finite set of atoms. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">y</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#typing_abs"><span class="id" title="constructor">typing_abs</span></a>.<br/>

<br/>
</div>

<div class="doc">
We cannot apply <span class="inlinecode"><span class="id" title="var">H0</span></span> directly here.  The first problem is that
        the induction hypothesis has <span class="inlinecode">(<a class="idref" href="LN.Fsub_Infrastructure.html#subst_ee"><span class="id" title="definition">subst_ee</span></a></span> <span class="inlinecode"><a class="idref" href="LN.Fsub_Definitions.html#open_ee"><span class="id" title="definition">open_ee</span></a>)</span>, whereas in
        the goal we have <span class="inlinecode">(<a class="idref" href="LN.Fsub_Definitions.html#open_ee"><span class="id" title="definition">open_ee</span></a></span> <span class="inlinecode"><a class="idref" href="LN.Fsub_Infrastructure.html#subst_ee"><span class="id" title="definition">subst_ee</span></a>)</span>.  The lemma
        <span class="inlinecode"><a class="idref" href="LN.Fsub_Infrastructure.html#subst_ee_open_ee_var"><span class="id" title="lemma">subst_ee_open_ee_var</span></a></span> lets us swap the order of these two
        operations. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="LN.Fsub_Infrastructure.html#subst_ee_open_ee_var"><span class="id" title="lemma">subst_ee_open_ee_var</span></a>...<br/>

<br/>
</div>

<div class="doc">
The second problem is how the concatenations are associated in
        the environments.  In the goal, we currently have

<div class="paragraph"> </div>

<pre>(y ~ bind_typ V ++ F ++ E),
</pre>
        where concatenation associates to the right.  In order to
        apply the induction hypothesis, we need

<div class="paragraph"> </div>

<pre>((y ~ bind_typ V ++ F) ++ E).
</pre>
        We can use the <span class="inlinecode"><span class="id" title="var">rewrite_env</span></span> tactic to perform this rewriting,
        or we can rewrite directly with an appropriate lemma from the
        MetatheoryEnv library. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Metalib.Metatheory.html#EnvImpl.app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>

<br/>
</div>

<div class="doc">
Now we can apply the induction hypothesis. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>...<br/>

<br/>
</div>

<div class="doc">
The remaining cases in this proof are straightforward, given
      everything that we have pointed out above. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_tabs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">Y</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#typing_tabs"><span class="id" title="constructor">typing_tabs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="LN.Fsub_Infrastructure.html#subst_ee_open_te_var"><span class="id" title="lemma">subst_ee_open_te_var</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Metalib.Metatheory.html#EnvImpl.app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_let".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">y</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#typing_let"><span class="id" title="constructor">typing_let</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="LN.Fsub_Infrastructure.html#subst_ee_open_ee_var"><span class="id" title="lemma">subst_ee_open_ee_var</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Metalib.Metatheory.html#EnvImpl.app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_case".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">y</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#typing_case"><span class="id" title="constructor">typing_case</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="LN.Fsub_Infrastructure.html#subst_ee_open_ee_var"><span class="id" title="lemma">subst_ee_open_ee_var</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Metalib.Metatheory.html#EnvImpl.app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="LN.Fsub_Infrastructure.html#subst_ee_open_ee_var"><span class="id" title="lemma">subst_ee_open_ee_var</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Metalib.Metatheory.html#EnvImpl.app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(************************************************************************&nbsp;*)</span><br/>
</div>

<div class="doc">
<a name="lab155"></a><h2 class="section">Type substitution preserves typing (11)</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="typing_through_subst_te"><span class="id" title="lemma">typing_through_subst_te</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">Q</span> <span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">Z</span> <span class="id" title="var">e</span> <span class="id" title="var">T</span> <span class="id" title="var">P</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> (<a class="idref" href="LN.Fsub_Soundness.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Z"><span class="id" title="variable">Z</span></a> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_sub"><span class="id" title="constructor">bind_sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> (<a class="idref" href="Metalib.Metatheory.html#EnvImpl.map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_tb"><span class="id" title="definition">subst_tb</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Z"><span class="id" title="variable">Z</span></a> <a class="idref" href="LN.Fsub_Soundness.html#P"><span class="id" title="variable">P</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_te"><span class="id" title="definition">subst_te</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Z"><span class="id" title="variable">Z</span></a> <a class="idref" href="LN.Fsub_Soundness.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a>) (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_tt"><span class="id" title="definition">subst_tt</span></a> <a class="idref" href="LN.Fsub_Soundness.html#Z"><span class="id" title="variable">Z</span></a> <a class="idref" href="LN.Fsub_Soundness.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a>).<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="var">simpl_env</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> 6 <span class="id" title="keyword">using</span> <a class="idref" href="LN.Fsub_Lemmas.html#wf_env_subst_tb"><span class="id" title="lemma">wf_env_subst_tb</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Lemmas.html#wf_typ_subst_tb"><span class="id" title="lemma">wf_typ_subst_tb</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Soundness.html#sub_through_subst_tt"><span class="id" title="lemma">sub_through_subst_tt</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Q</span> <span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">Z</span> <span class="id" title="var">e</span> <span class="id" title="var">T</span> <span class="id" title="var">P</span> <span class="id" title="var">Typ</span> <span class="id" title="var">PsubQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">F</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">Z</span> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_sub"><span class="id" title="constructor">bind_sub</span></a> <span class="id" title="var">Q</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">G</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">F</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Typ</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">F</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="var">subst_te</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="var">subst_tt</span> <span class="id" title="tactic">in</span> *...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_var".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#typing_var"><span class="id" title="constructor">typing_var</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="LN.Fsub_Lemmas.html#map_subst_tb_id"><span class="id" title="lemma">map_subst_tb_id</span></a> <span class="id" title="var">E</span> <span class="id" title="var">Z</span> <span class="id" title="var">P</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ | <span class="id" title="tactic">auto</span> | <span class="id" title="tactic">eapply</span> <a class="idref" href="Metalib.Metatheory.html#EnvImpl.fresh_mid_tail"><span class="id" title="lemma">fresh_mid_tail</span></a>; <span class="id" title="tactic">eauto</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">analyze_binds</span> <span class="id" title="var">H0</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_abs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">y</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#typing_abs"><span class="id" title="constructor">typing_abs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="LN.Fsub_Infrastructure.html#subst_te_open_ee_var"><span class="id" title="lemma">subst_te_open_ee_var</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rewrite_env</span> (<a class="idref" href="Metalib.Metatheory.html#EnvImpl.map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_tb"><span class="id" title="definition">subst_tb</span></a> <span class="id" title="var">Z</span> <span class="id" title="var">P</span>) (<span class="id" title="var">y</span> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_typ"><span class="id" title="constructor">bind_typ</span></a> <span class="id" title="var">V</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">F</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_tabs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">Y</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#typing_tabs"><span class="id" title="constructor">typing_tabs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="LN.Fsub_Infrastructure.html#subst_te_open_te_var"><span class="id" title="lemma">subst_te_open_te_var</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="LN.Fsub_Infrastructure.html#subst_tt_open_tt_var"><span class="id" title="lemma">subst_tt_open_tt_var</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rewrite_env</span> (<a class="idref" href="Metalib.Metatheory.html#EnvImpl.map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_tb"><span class="id" title="definition">subst_tb</span></a> <span class="id" title="var">Z</span> <span class="id" title="var">P</span>) (<span class="id" title="var">Y</span> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_sub"><span class="id" title="constructor">bind_sub</span></a> <span class="id" title="var">V</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">F</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_tapp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="LN.Fsub_Infrastructure.html#subst_tt_open_tt"><span class="id" title="lemma">subst_tt_open_tt</span></a>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_let".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">y</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#typing_let"><span class="id" title="constructor">typing_let</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="LN.Fsub_Infrastructure.html#subst_te_open_ee_var"><span class="id" title="lemma">subst_te_open_ee_var</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rewrite_env</span> (<a class="idref" href="Metalib.Metatheory.html#EnvImpl.map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_tb"><span class="id" title="definition">subst_tb</span></a> <span class="id" title="var">Z</span> <span class="id" title="var">P</span>) (<span class="id" title="var">y</span> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_typ"><span class="id" title="constructor">bind_typ</span></a> <span class="id" title="var">T1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">F</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_case".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">y</span> <span class="id" title="var">and</span> <span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Definitions.html#typing_case"><span class="id" title="constructor">typing_case</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "inl branch".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="LN.Fsub_Infrastructure.html#subst_te_open_ee_var"><span class="id" title="lemma">subst_te_open_ee_var</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rewrite_env</span> (<a class="idref" href="Metalib.Metatheory.html#EnvImpl.map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_tb"><span class="id" title="definition">subst_tb</span></a> <span class="id" title="var">Z</span> <span class="id" title="var">P</span>) (<span class="id" title="var">y</span> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_typ"><span class="id" title="constructor">bind_typ</span></a> <span class="id" title="var">T1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">F</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "inr branch".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="LN.Fsub_Infrastructure.html#subst_te_open_ee_var"><span class="id" title="lemma">subst_te_open_ee_var</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rewrite_env</span> (<a class="idref" href="Metalib.Metatheory.html#EnvImpl.map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_tb"><span class="id" title="definition">subst_tb</span></a> <span class="id" title="var">Z</span> <span class="id" title="var">P</span>) (<span class="id" title="var">y</span> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_typ"><span class="id" title="constructor">bind_typ</span></a> <span class="id" title="var">T2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">F</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;**********************************************************************&nbsp;*)</span><br/>
</div>

<div class="doc">
<a name="lab156"></a><h1 class="section"><a name="preservation"></a> Preservation</h1>

</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;**********************************************************************&nbsp;*)</span><br/>
</div>

<div class="doc">
<a name="lab157"></a><h2 class="section">Inversion of typing (13)</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="typing_inv_abs"><span class="id" title="lemma">typing_inv_abs</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">E</span> <span class="id" title="var">S1</span> <span class="id" title="var">e1</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> (<a class="idref" href="LN.Fsub_Definitions.html#exp_abs"><span class="id" title="constructor">exp_abs</span></a> <a class="idref" href="LN.Fsub_Soundness.html#S1"><span class="id" title="variable">S1</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e1"><span class="id" title="variable">e1</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span>, <a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> (<a class="idref" href="LN.Fsub_Definitions.html#typ_arrow"><span class="id" title="constructor">typ_arrow</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U1"><span class="id" title="variable">U1</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U2"><span class="id" title="variable">U2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U1"><span class="id" title="variable">U1</span></a> <a class="idref" href="LN.Fsub_Soundness.html#S1"><span class="id" title="variable">S1</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">S2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">L</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <a class="idref" href="LN.Fsub_Soundness.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Metalib.Metatheory.html#06a610b5021a539a67215d21440be337"><span class="id" title="notation">`</span></a><a class="idref" href="Metalib.Metatheory.html#06a610b5021a539a67215d21440be337"><span class="id" title="notation">notin</span></a><a class="idref" href="Metalib.Metatheory.html#06a610b5021a539a67215d21440be337"><span class="id" title="notation">`</span></a> <a class="idref" href="LN.Fsub_Soundness.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> (<a class="idref" href="LN.Fsub_Soundness.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_typ"><span class="id" title="constructor">bind_typ</span></a> <a class="idref" href="LN.Fsub_Soundness.html#S1"><span class="id" title="variable">S1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) (<a class="idref" href="LN.Fsub_Definitions.html#open_ee"><span class="id" title="definition">open_ee</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="LN.Fsub_Soundness.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#S2"><span class="id" title="variable">S2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#S2"><span class="id" title="variable">S2</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U2"><span class="id" title="variable">U2</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">S1</span> <span class="id" title="var">e1</span> <span class="id" title="var">T</span> <span class="id" title="var">Typ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="LN.Fsub_Definitions.html#exp_abs"><span class="id" title="constructor">exp_abs</span></a> <span class="id" title="var">S1</span> <span class="id" title="var">e1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">e1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">S1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Typ</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">S1</span> <span class="id" title="var">b1</span> <span class="id" title="var">EQ</span> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span> <span class="id" title="var">Sub</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_abs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Sub</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">T1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">L</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_sub".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> (<a class="idref" href="LN.Fsub_Soundness.html#sub_transitivity"><span class="id" title="lemma">sub_transitivity</span></a> <span class="id" title="var">T</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="typing_inv_tabs"><span class="id" title="lemma">typing_inv_tabs</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">E</span> <span class="id" title="var">S1</span> <span class="id" title="var">e1</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> (<a class="idref" href="LN.Fsub_Definitions.html#exp_tabs"><span class="id" title="constructor">exp_tabs</span></a> <a class="idref" href="LN.Fsub_Soundness.html#S1"><span class="id" title="variable">S1</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e1"><span class="id" title="variable">e1</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span>, <a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> (<a class="idref" href="LN.Fsub_Definitions.html#typ_all"><span class="id" title="constructor">typ_all</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U1"><span class="id" title="variable">U1</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U2"><span class="id" title="variable">U2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U1"><span class="id" title="variable">U1</span></a> <a class="idref" href="LN.Fsub_Soundness.html#S1"><span class="id" title="variable">S1</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">S2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">L</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="keyword">forall</span> <span class="id" title="var">X</span>, <a class="idref" href="LN.Fsub_Soundness.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="Metalib.Metatheory.html#06a610b5021a539a67215d21440be337"><span class="id" title="notation">`</span></a><a class="idref" href="Metalib.Metatheory.html#06a610b5021a539a67215d21440be337"><span class="id" title="notation">notin</span></a><a class="idref" href="Metalib.Metatheory.html#06a610b5021a539a67215d21440be337"><span class="id" title="notation">`</span></a> <a class="idref" href="LN.Fsub_Soundness.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> (<a class="idref" href="LN.Fsub_Soundness.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_sub"><span class="id" title="constructor">bind_sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U1"><span class="id" title="variable">U1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) (<a class="idref" href="LN.Fsub_Definitions.html#open_te"><span class="id" title="definition">open_te</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="LN.Fsub_Soundness.html#X"><span class="id" title="variable">X</span></a>) (<a class="idref" href="LN.Fsub_Definitions.html#open_tt"><span class="id" title="definition">open_tt</span></a> <a class="idref" href="LN.Fsub_Soundness.html#S2"><span class="id" title="variable">S2</span></a> <a class="idref" href="LN.Fsub_Soundness.html#X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> (<a class="idref" href="LN.Fsub_Soundness.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_sub"><span class="id" title="constructor">bind_sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U1"><span class="id" title="variable">U1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a>) (<a class="idref" href="LN.Fsub_Definitions.html#open_tt"><span class="id" title="definition">open_tt</span></a> <a class="idref" href="LN.Fsub_Soundness.html#S2"><span class="id" title="variable">S2</span></a> <a class="idref" href="LN.Fsub_Soundness.html#X"><span class="id" title="variable">X</span></a>) (<a class="idref" href="LN.Fsub_Definitions.html#open_tt"><span class="id" title="definition">open_tt</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U2"><span class="id" title="variable">U2</span></a> <a class="idref" href="LN.Fsub_Soundness.html#X"><span class="id" title="variable">X</span></a>).<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="var">simpl_env</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">S1</span> <span class="id" title="var">e1</span> <span class="id" title="var">T</span> <span class="id" title="var">Typ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="LN.Fsub_Definitions.html#exp_tabs"><span class="id" title="constructor">exp_tabs</span></a> <span class="id" title="var">S1</span> <span class="id" title="var">e1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">e1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">S1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Typ</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">S1</span> <span class="id" title="var">e0</span> <span class="id" title="var">EQ</span> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span> <span class="id" title="var">Sub</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_tabs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Sub</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">T1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">L0</span> <a class="idref" href="Metalib.Metatheory.html#025c90617166371a5921b2be3f12a7b4"><span class="id" title="notation">`</span></a><a class="idref" href="Metalib.Metatheory.html#025c90617166371a5921b2be3f12a7b4"><span class="id" title="notation">union</span></a><a class="idref" href="Metalib.Metatheory.html#025c90617166371a5921b2be3f12a7b4"><span class="id" title="notation">`</span></a> <span class="id" title="var">L</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Y</span> <span class="id" title="var">Fr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rewrite_env</span> (<a class="idref" href="LN.Fsub_Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">Y</span> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_sub"><span class="id" title="constructor">bind_sub</span></a> <span class="id" title="var">U1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="LN.Fsub_Soundness.html#typing_narrowing"><span class="id" title="lemma">typing_narrowing</span></a> <span class="id" title="var">S1</span>)...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_sub".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> (<a class="idref" href="LN.Fsub_Soundness.html#sub_transitivity"><span class="id" title="lemma">sub_transitivity</span></a> <span class="id" title="var">T</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="typing_inv_inl"><span class="id" title="lemma">typing_inv_inl</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">E</span> <span class="id" title="var">e1</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> (<a class="idref" href="LN.Fsub_Definitions.html#exp_inl"><span class="id" title="constructor">exp_inl</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e1"><span class="id" title="variable">e1</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span>, <a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> (<a class="idref" href="LN.Fsub_Definitions.html#typ_sum"><span class="id" title="constructor">typ_sum</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U1"><span class="id" title="variable">U1</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U2"><span class="id" title="variable">U2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">S1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="LN.Fsub_Soundness.html#S1"><span class="id" title="variable">S1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#S1"><span class="id" title="variable">S1</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U1"><span class="id" title="variable">U1</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">e1</span> <span class="id" title="var">T</span> <span class="id" title="var">Typ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="LN.Fsub_Definitions.html#exp_inl"><span class="id" title="constructor">exp_inl</span></a> <span class="id" title="var">e1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">e1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Typ</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">e'</span> <span class="id" title="var">EQ</span> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span> <span class="id" title="var">Sub</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_sub".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> (<a class="idref" href="LN.Fsub_Soundness.html#sub_transitivity"><span class="id" title="lemma">sub_transitivity</span></a> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_inl".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Sub</span>; <span class="id" title="tactic">subst</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="typing_inv_inr"><span class="id" title="lemma">typing_inv_inr</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">E</span> <span class="id" title="var">e1</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> (<a class="idref" href="LN.Fsub_Definitions.html#exp_inr"><span class="id" title="constructor">exp_inr</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e1"><span class="id" title="variable">e1</span></a>) <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span>, <a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> (<a class="idref" href="LN.Fsub_Definitions.html#typ_sum"><span class="id" title="constructor">typ_sum</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U1"><span class="id" title="variable">U1</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U2"><span class="id" title="variable">U2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">S1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="LN.Fsub_Soundness.html#S1"><span class="id" title="variable">S1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="LN.Fsub_Definitions.html#sub"><span class="id" title="inductive">sub</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#S1"><span class="id" title="variable">S1</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U2"><span class="id" title="variable">U2</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">e1</span> <span class="id" title="var">T</span> <span class="id" title="var">Typ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="LN.Fsub_Definitions.html#exp_inr"><span class="id" title="constructor">exp_inr</span></a> <span class="id" title="var">e1</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">e1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Typ</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">e'</span> <span class="id" title="var">EQ</span> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span> <span class="id" title="var">Sub</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_sub".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> (<a class="idref" href="LN.Fsub_Soundness.html#sub_transitivity"><span class="id" title="lemma">sub_transitivity</span></a> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_inr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Sub</span>; <span class="id" title="tactic">subst</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;**********************************************************************&nbsp;*)</span><br/>
</div>

<div class="doc">
<a name="lab158"></a><h2 class="section">Preservation (20)</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="preservation"><span class="id" title="lemma">preservation</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">E</span> <span class="id" title="var">e</span> <span class="id" title="var">e'</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#red"><span class="id" title="inductive">red</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> <a class="idref" href="LN.Fsub_Soundness.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="var">simpl_env</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span> <span class="id" title="var">e</span> <span class="id" title="var">e'</span> <span class="id" title="var">T</span> <span class="id" title="var">Typ</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">e'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Typ</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">e'</span> <span class="id" title="var">Red</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Red</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_app".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Red</span>; <span class="id" title="tactic">subst</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "red_abs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="LN.Fsub_Soundness.html#typing_inv_abs"><span class="id" title="lemma">typing_inv_abs</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Typ1</span> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">P1</span> [<span class="id" title="var">S2</span> [<span class="id" title="var">L</span> <span class="id" title="var">P2</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Soundness.html#sub_reflexivity"><span class="id" title="lemma">sub_reflexivity</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">P2</span> <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> [? ?]...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_ee_intro"><span class="id" title="lemma">subst_ee_intro</span></a> <span class="id" title="var">x</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rewrite_env</span> (<a class="idref" href="LN.Fsub_Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="LN.Fsub_Soundness.html#typing_through_subst_ee"><span class="id" title="lemma">typing_through_subst_ee</span></a> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="LN.Fsub_Definitions.html#typing_sub"><span class="id" title="constructor">typing_sub</span></a> <span class="id" title="var">S2</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rewrite_env</span> (<a class="idref" href="LN.Fsub_Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">x</span> <a class="idref" href="Metalib.AssocList.html#b102cb7dfbadf7eeba2c3630534ef84d"><span class="id" title="notation">~</span></a> <a class="idref" href="LN.Fsub_Definitions.html#bind_typ"><span class="id" title="constructor">bind_typ</span></a> <span class="id" title="var">T</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Soundness.html#sub_weakening"><span class="id" title="lemma">sub_weakening</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_tapp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Red</span>; <span class="id" title="tactic">subst</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "red_tabs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="LN.Fsub_Soundness.html#typing_inv_tabs"><span class="id" title="lemma">typing_inv_tabs</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Typ</span> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">P1</span> [<span class="id" title="var">S2</span> [<span class="id" title="var">L</span> <span class="id" title="var">P2</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Soundness.html#sub_reflexivity"><span class="id" title="lemma">sub_reflexivity</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">P2</span> <span class="id" title="var">X</span>) <span class="id" title="keyword">as</span> [? ?]...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_te_intro"><span class="id" title="lemma">subst_te_intro</span></a> <span class="id" title="var">X</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_tt_intro"><span class="id" title="lemma">subst_tt_intro</span></a> <span class="id" title="var">X</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rewrite_env</span> (<a class="idref" href="Metalib.Metatheory.html#EnvImpl.map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_tb"><span class="id" title="definition">subst_tb</span></a> <span class="id" title="var">X</span> <span class="id" title="var">T</span>) <a class="idref" href="LN.Fsub_Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="LN.Fsub_Soundness.html#typing_through_subst_te"><span class="id" title="lemma">typing_through_subst_te</span></a> <span class="id" title="var">T1</span>)...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_let".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Red</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "red_let_1".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="LN.Fsub_Definitions.html#typing_let"><span class="id" title="constructor">typing_let</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "red_let".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_ee_intro"><span class="id" title="lemma">subst_ee_intro</span></a> <span class="id" title="var">x</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rewrite_env</span> (<a class="idref" href="LN.Fsub_Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="LN.Fsub_Soundness.html#typing_through_subst_ee"><span class="id" title="lemma">typing_through_subst_ee</span></a> <span class="id" title="var">T1</span>)...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_case".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Red</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "red_case_1".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="LN.Fsub_Definitions.html#typing_case"><span class="id" title="constructor">typing_case</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "red_case_inl".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="LN.Fsub_Soundness.html#typing_inv_inl"><span class="id" title="lemma">typing_inv_inl</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Typ</span> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">S1</span> [<span class="id" title="var">J2</span> <span class="id" title="var">J3</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Soundness.html#sub_reflexivity"><span class="id" title="lemma">sub_reflexivity</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_ee_intro"><span class="id" title="lemma">subst_ee_intro</span></a> <span class="id" title="var">x</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rewrite_env</span> (<a class="idref" href="LN.Fsub_Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="LN.Fsub_Soundness.html#typing_through_subst_ee"><span class="id" title="lemma">typing_through_subst_ee</span></a> <span class="id" title="var">T1</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "red_case_inr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="LN.Fsub_Soundness.html#typing_inv_inr"><span class="id" title="lemma">typing_inv_inr</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Typ</span> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">S1</span> [<span class="id" title="var">J2</span> <span class="id" title="var">J3</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Soundness.html#sub_reflexivity"><span class="id" title="lemma">sub_reflexivity</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick</span> <span class="id" title="tactic">fresh</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="LN.Fsub_Infrastructure.html#subst_ee_intro"><span class="id" title="lemma">subst_ee_intro</span></a> <span class="id" title="var">x</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rewrite_env</span> (<a class="idref" href="LN.Fsub_Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="LN.Fsub_Soundness.html#typing_through_subst_ee"><span class="id" title="lemma">typing_through_subst_ee</span></a> <span class="id" title="var">T2</span>)...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;**********************************************************************&nbsp;*)</span><br/>
</div>

<div class="doc">
<a name="lab159"></a><h1 class="section"><a name="progress"></a> Progress</h1>

</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;**********************************************************************&nbsp;*)</span><br/>
</div>

<div class="doc">
<a name="lab160"></a><h2 class="section">Canonical forms (14)</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="canonical_form_abs"><span class="id" title="lemma">canonical_form_abs</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">e</span> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#value"><span class="id" title="inductive">value</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> <a class="idref" href="LN.Fsub_Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a> (<a class="idref" href="LN.Fsub_Definitions.html#typ_arrow"><span class="id" title="constructor">typ_arrow</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U1"><span class="id" title="variable">U1</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U2"><span class="id" title="variable">U2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">e1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="LN.Fsub_Definitions.html#exp_abs"><span class="id" title="constructor">exp_abs</span></a> <a class="idref" href="LN.Fsub_Soundness.html#V"><span class="id" title="variable">V</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e1"><span class="id" title="variable">e1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">e</span> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span> <span class="id" title="var">Val</span> <span class="id" title="var">Typ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> <a class="idref" href="LN.Fsub_Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="LN.Fsub_Definitions.html#typ_arrow"><span class="id" title="constructor">typ_arrow</span></a> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">T</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span> <span class="id" title="var">HeqT</span> <span class="id" title="var">HeqE</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Typ</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span> <span class="id" title="var">EQT</span> <span class="id" title="var">EQE</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Val</span> | <span class="id" title="tactic">inversion</span> <span class="id" title="var">EQT</span> | <span class="id" title="tactic">eauto</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_sub".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="canonical_form_tabs"><span class="id" title="lemma">canonical_form_tabs</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">e</span> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#value"><span class="id" title="inductive">value</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> <a class="idref" href="LN.Fsub_Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a> (<a class="idref" href="LN.Fsub_Definitions.html#typ_all"><span class="id" title="constructor">typ_all</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U1"><span class="id" title="variable">U1</span></a> <a class="idref" href="LN.Fsub_Soundness.html#U2"><span class="id" title="variable">U2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">e1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="LN.Fsub_Definitions.html#exp_tabs"><span class="id" title="constructor">exp_tabs</span></a> <a class="idref" href="LN.Fsub_Soundness.html#V"><span class="id" title="variable">V</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e1"><span class="id" title="variable">e1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">e</span> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span> <span class="id" title="var">Val</span> <span class="id" title="var">Typ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> <a class="idref" href="LN.Fsub_Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="LN.Fsub_Definitions.html#typ_all"><span class="id" title="constructor">typ_all</span></a> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">T</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span> <span class="id" title="var">HeqT</span> <span class="id" title="var">HeqT</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Typ</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span> <span class="id" title="var">EQT</span> <span class="id" title="var">EQE</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Val</span> | <span class="id" title="tactic">inversion</span> <span class="id" title="var">EQT</span> | <span class="id" title="tactic">eauto</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_sub".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="canonical_form_sum"><span class="id" title="lemma">canonical_form_sum</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">e</span> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#value"><span class="id" title="inductive">value</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> <a class="idref" href="LN.Fsub_Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a> (<a class="idref" href="LN.Fsub_Definitions.html#typ_sum"><span class="id" title="constructor">typ_sum</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T1"><span class="id" title="variable">T1</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T2"><span class="id" title="variable">T2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">e1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="LN.Fsub_Definitions.html#exp_inl"><span class="id" title="constructor">exp_inl</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="LN.Fsub_Definitions.html#exp_inr"><span class="id" title="constructor">exp_inr</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e1"><span class="id" title="variable">e1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">e</span> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span> <span class="id" title="var">Val</span> <span class="id" title="var">Typ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> <a class="idref" href="LN.Fsub_Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="LN.Fsub_Definitions.html#typ_sum"><span class="id" title="constructor">typ_sum</span></a> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">T</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span> <span class="id" title="var">HeqE</span> <span class="id" title="var">HeqT</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Typ</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span> <span class="id" title="var">EQE</span> <span class="id" title="var">EQT</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Val</span> | <span class="id" title="tactic">inversion</span> <span class="id" title="var">EQT</span> | <span class="id" title="tactic">eauto</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_sub".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;**********************************************************************&nbsp;*)</span><br/>
</div>

<div class="doc">
<a name="lab161"></a><h2 class="section">Progress (16)</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="progress"><span class="id" title="lemma">progress</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">e</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> <a class="idref" href="LN.Fsub_Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="LN.Fsub_Soundness.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="LN.Fsub_Definitions.html#value"><span class="id" title="inductive">value</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">e'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="LN.Fsub_Definitions.html#red"><span class="id" title="inductive">red</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="LN.Fsub_Soundness.html#e'"><span class="id" title="variable">e'</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">e</span> <span class="id" title="var">T</span> <span class="id" title="var">Typ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> <a class="idref" href="LN.Fsub_Definitions.html#empty"><span class="id" title="abbreviation">empty</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">E</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">HeqE</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Typ'</span> : <a class="idref" href="LN.Fsub_Definitions.html#typing"><span class="id" title="inductive">typing</span></a> <span class="id" title="var">E</span> <span class="id" title="var">e</span> <span class="id" title="var">T</span>)...<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Typ</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">EQ</span>; <span class="id" title="tactic">subst</span>...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_var".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_app".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHTyp1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Val1</span> | [<span class="id" title="var">e1'</span> <span class="id" title="var">Rede1'</span>]]...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "Val1".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHTyp2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Val2</span> | [<span class="id" title="var">e2'</span> <span class="id" title="var">Rede2'</span>]]...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SSCase</span> "Val2".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="LN.Fsub_Soundness.html#canonical_form_abs"><span class="id" title="lemma">canonical_form_abs</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Val1</span> <span class="id" title="var">Typ1</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">S</span> [<span class="id" title="var">e3</span> <span class="id" title="var">EQ</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="LN.Fsub_Definitions.html#open_ee"><span class="id" title="definition">open_ee</span></a> <span class="id" title="var">e3</span> <span class="id" title="var">e2</span>)...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_tapp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHTyp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Val1</span> | [<span class="id" title="var">e1'</span> <span class="id" title="var">Rede1'</span>]]...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "Val1".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="LN.Fsub_Soundness.html#canonical_form_tabs"><span class="id" title="lemma">canonical_form_tabs</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Val1</span> <span class="id" title="var">Typ</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">S</span> [<span class="id" title="var">e3</span> <span class="id" title="var">EQ</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="LN.Fsub_Definitions.html#open_te"><span class="id" title="definition">open_te</span></a> <span class="id" title="var">e3</span> <span class="id" title="var">T</span>)...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_let".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHTyp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Val1</span> | [<span class="id" title="var">e1'</span> <span class="id" title="var">Rede1'</span>]]...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_inl".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="LN.Fsub_Soundness.html#typing_inv_inl"><span class="id" title="lemma">typing_inv_inl</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Typ'</span> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">S1</span> [<span class="id" title="var">J2</span> <span class="id" title="var">J3</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Soundness.html#sub_reflexivity"><span class="id" title="lemma">sub_reflexivity</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHTyp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">J1</span> | [<span class="id" title="var">e'</span> <span class="id" title="var">J1</span>]]...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_inr".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="LN.Fsub_Soundness.html#typing_inv_inr"><span class="id" title="lemma">typing_inv_inr</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Typ'</span> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">S1</span> [<span class="id" title="var">J2</span> <span class="id" title="var">J3</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="LN.Fsub_Soundness.html#sub_reflexivity"><span class="id" title="lemma">sub_reflexivity</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHTyp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">J1</span> | [<span class="id" title="var">e'</span> <span class="id" title="var">J1</span>]]...<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "typing_case".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHTyp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Val1</span> | [<span class="id" title="var">e'</span> <span class="id" title="var">Rede'</span>]]...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "Val1".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="LN.Fsub_Soundness.html#canonical_form_sum"><span class="id" title="lemma">canonical_form_sum</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Val1</span> <span class="id" title="var">Typ</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">e4</span> [<span class="id" title="var">J1</span> | <span class="id" title="var">J1</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SSCase</span> "Left J1".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="LN.Fsub_Definitions.html#open_ee"><span class="id" title="definition">open_ee</span></a> <span class="id" title="var">e2</span> <span class="id" title="var">e4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Val1</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="LN.Fsub_Definitions.html#expr"><span class="id" title="inductive">expr</span></a> (<a class="idref" href="LN.Fsub_Definitions.html#exp_case"><span class="id" title="constructor">exp_case</span></a> (<a class="idref" href="LN.Fsub_Definitions.html#exp_inl"><span class="id" title="constructor">exp_inl</span></a> <span class="id" title="var">e4</span>) <span class="id" title="var">e2</span> <span class="id" title="var">e3</span>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SSCase</span> "Right J1".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="LN.Fsub_Definitions.html#open_ee"><span class="id" title="definition">open_ee</span></a> <span class="id" title="var">e3</span> <span class="id" title="var">e4</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Val1</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="LN.Fsub_Definitions.html#expr"><span class="id" title="inductive">expr</span></a> (<a class="idref" href="LN.Fsub_Definitions.html#exp_case"><span class="id" title="constructor">exp_case</span></a> (<a class="idref" href="LN.Fsub_Definitions.html#exp_inr"><span class="id" title="constructor">exp_inr</span></a> <span class="id" title="var">e4</span>) <span class="id" title="var">e2</span> <span class="id" title="var">e3</span>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
